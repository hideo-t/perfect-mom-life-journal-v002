<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å®Œç’§ãƒãƒã®æ—¥ã€…å¥®é—˜è¨˜</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Zen+Kaku+Gothic+New:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-card: #1a1a2e;
      --text-primary: #e0ddd5;
      --text-secondary: #8a8a9a;
      --accent: #4a9eff;
      --accent-dim: #2a5a9a;
      --gold: #c4a35a;
      --chapter-border: #2a2a3e;
      --serif: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      --sans: 'Zen Kaku Gothic New', 'Hiragino Kaku Gothic ProN', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: var(--serif);
      font-size: 17px;
      line-height: 1.95;
      min-height: 100vh;
    }

    /* â”€â”€â”€ Header â”€â”€â”€ */
    .hero {
      position: relative;
      text-align: center;
      padding: 100px 20px 80px;
      background: linear-gradient(180deg, #1a2a4a 0%, #0f1a2f 100%);
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute; inset: 0;
      background: radial-gradient(ellipse at 50% 30%, rgba(120,180,255,0.15) 0%, transparent 70%);
    }
    .hero-title {
      font-family: var(--serif);
      font-size: clamp(1.8rem, 5vw, 3.2rem);
      font-weight: 700;
      letter-spacing: 0.08em;
      color: #ffffff;
      text-shadow: 0 2px 20px rgba(100,160,255,0.3);
      margin-bottom: 12px;
      position: relative;
    }
    .hero-sub {
      font-family: var(--sans);
      font-size: 0.9rem;
      color: #b0c4de;
      letter-spacing: 0.15em;
    }
    .hero-line {
      width: 60px; height: 1px;
      background: var(--gold);
      margin: 28px auto 0;
    }

    /* â”€â”€â”€ Navigation â”€â”€â”€ */
    .nav-bar {
      position: sticky; top: 0; z-index: 100;
      background: rgba(10,10,15,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--chapter-border);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      overflow-x: auto;
      font-family: var(--sans);
      font-size: 0.8rem;
    }
    .nav-bar .nav-title {
      color: var(--gold);
      font-weight: 700;
      white-space: nowrap;
      margin-right: 8px;
    }
    .nav-bar a {
      color: var(--text-secondary);
      text-decoration: none;
      white-space: nowrap;
      padding: 4px 10px;
      border-radius: 4px;
      transition: all 0.2s;
    }
    .nav-bar a:hover {
      color: var(--accent);
      background: rgba(74,158,255,0.1);
    }

    /* â”€â”€â”€ TOC â”€â”€â”€ */
    .toc {
      max-width: 700px;
      margin: 60px auto 40px;
      padding: 0 20px;
    }
    .toc h3 {
      font-family: var(--sans);
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      color: var(--text-secondary);
      text-transform: uppercase;
      margin-bottom: 20px;
    }
    .toc-item {
      display: flex; align-items: center; gap: 16px;
      padding: 14px 18px;
      color: var(--text-primary);
      text-decoration: none;
      border-left: 2px solid var(--chapter-border);
      transition: all 0.25s;
      font-family: var(--sans);
      font-size: 0.95rem;
    }
    .toc-item:hover {
      border-color: var(--accent);
      background: rgba(74,158,255,0.04);
      padding-left: 24px;
    }
    .toc-num {
      font-size: 0.75rem;
      color: var(--accent-dim);
      font-weight: 700;
      min-width: 20px;
    }

    /* â”€â”€â”€ Characters â”€â”€â”€ */
    .characters {
      max-width: 700px;
      margin: 40px auto 60px;
      padding: 0 20px;
    }
    .characters h3 {
      font-family: var(--sans);
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }
    .char-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 14px;
    }
    .char-card {
      background: var(--bg-card);
      border: 1px solid var(--chapter-border);
      border-radius: 8px;
      padding: 18px;
    }
    .char-name {
      font-family: var(--sans);
      font-weight: 700;
      font-size: 1rem;
      color: var(--gold);
      margin-bottom: 4px;
    }
    .char-role {
      font-family: var(--sans);
      font-size: 0.75rem;
      color: var(--accent);
      margin-bottom: 8px;
    }
    .char-desc {
      font-size: 0.85rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* â”€â”€â”€ Divider â”€â”€â”€ */
    .section-divider {
      width: 40px; height: 1px;
      background: var(--chapter-border);
      margin: 0 auto;
    }

    /* â”€â”€â”€ Chapter â”€â”€â”€ */
    .chapter {
      max-width: 700px;
      margin: 0 auto;
      padding: 80px 20px;
      border-top: 1px solid var(--chapter-border);
    }
    .chapter-header {
      text-align: center;
      margin-bottom: 48px;
    }
    .chapter-number {
      font-family: var(--sans);
      font-size: 0.7rem;
      letter-spacing: 0.25em;
      color: var(--accent-dim);
      display: block;
      margin-bottom: 8px;
    }
    .chapter-title {
      font-family: var(--serif);
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: 700;
      letter-spacing: 0.05em;
    }
    .chapter-image {
      margin: 0 -20px 40px;
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid var(--chapter-border);
    }
    .chapter-image img {
      width: 100%;
      height: auto;
      display: block;
      opacity: 0.92;
    }
    .chapter-body p {
      margin-bottom: 1.2em;
      text-indent: 1em;
      text-align: justify;
    }
    .chapter-body p:empty {
      display: none;
    }

    /* â”€â”€â”€ Footer â”€â”€â”€ */
    .footer {
      text-align: center;
      padding: 60px 20px;
      font-family: var(--sans);
      font-size: 0.75rem;
      color: var(--text-secondary);
      border-top: 1px solid var(--chapter-border);
    }

    /* â”€â”€â”€ Reading mode toggle â”€â”€â”€ */
    .mode-toggle {
      position: fixed; bottom: 20px; right: 20px; z-index: 200;
      background: var(--bg-card);
      border: 1px solid var(--chapter-border);
      color: var(--text-secondary);
      font-family: var(--sans);
      font-size: 0.75rem;
      padding: 8px 14px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mode-toggle:hover {
      border-color: var(--accent);
      color: var(--accent);
    }


    /* --- TTS Read Aloud --- */
    .tts-fab {
      position: fixed; bottom: 80px; right: 20px; z-index: 200;
      width: 48px; height: 48px; border-radius: 50%;
      background: var(--accent); color: #fff; border: none;
      font-size: 22px; cursor: pointer;
      box-shadow: 0 4px 16px rgba(0,0,0,0.4);
      transition: all 0.3s;
      display: flex; align-items: center; justify-content: center;
    }
    .tts-fab:hover { transform: scale(1.1); }
    .tts-fab.speaking { background: #e74c3c; animation: tts-pulse 1.5s infinite; }
    @keyframes tts-pulse {
      0%,100% { box-shadow: 0 4px 16px rgba(231,76,60,0.4); }
      50% { box-shadow: 0 4px 24px rgba(231,76,60,0.7); }
    }
    .tts-bar {
      position: fixed; bottom: 0; left: 0; right: 0; z-index: 200;
      background: rgba(20,20,30,0.95); backdrop-filter: blur(12px);
      border-top: 1px solid var(--chapter-border);
      padding: 10px 16px; display: none;
      align-items: center; gap: 10px;
      font-family: var(--sans); font-size: 0.85rem;
    }
    .tts-bar.active { display: flex; flex-wrap: wrap; }
    .tts-bar button {
      background: none; border: 1px solid var(--text-secondary);
      color: var(--text-primary); border-radius: 6px;
      padding: 6px 12px; cursor: pointer; font-size: 0.8rem;
      white-space: nowrap; transition: all 0.2s;
    }
    .tts-bar button:hover { border-color: var(--accent); color: var(--accent); }
    .tts-bar .tts-info {
      flex: 1; color: var(--text-secondary);
      overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
      min-width: 80px;
    }
    .tts-bar .tts-speed {
      display: flex; align-items: center; gap: 4px;
      color: var(--text-secondary); font-size: 0.75rem;
    }
    .tts-bar .tts-speed input { width: 60px; accent-color: var(--accent); }
    body.light .tts-bar {
      background: rgba(245,245,240,0.95); border-top-color: #ddd;
    }
    body.light .tts-bar button { border-color: #999; color: #333; }
    body.light .tts-bar .tts-info { color: #666; }

    /* â”€â”€â”€ Light mode â”€â”€â”€ */
    body.light {
      --bg-primary: #f5f0e8;
      --bg-secondary: #ebe5d9;
      --bg-card: #fff;
      --text-primary: #2a2a2a;
      --text-secondary: #6a6a6a;
      --chapter-border: #d5cfc3;
      --accent: #2563eb;
      --accent-dim: #6b9eff;
      --gold: #8a6d2b;
    }

    /* â”€â”€â”€ Responsive â”€â”€â”€ */
    @media (max-width: 600px) {
      body { font-size: 15px; }
      .chapter { padding: 50px 16px; }
    }

    /* â”€â”€â”€ Scroll progress â”€â”€â”€ */
    .scroll-progress {
      position: fixed; top: 0; left: 0; z-index: 200;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--gold));
      width: 0%;
      transition: width 0.1s;
    }
  </style>
</head>
<body>
  <div class="scroll-progress" id="progress"></div>

  <header class="hero">
    <h1 class="hero-title">å®Œç’§ãƒãƒã®æ—¥ã€…å¥®é—˜è¨˜</h1>
    <p class="hero-sub">GENERATED WITH LOCAL AI â€” OLLAMA + STABLE DIFFUSION</p>
    <div class="hero-line"></div>
  </header>

  <nav class="nav-bar">
    <span class="nav-title">ç›®æ¬¡</span>
    <a href="#chapter-1">ç¬¬1ç« </a><a href="#chapter-2">ç¬¬2ç« </a><a href="#chapter-3">ç¬¬3ç« </a>
  </nav>

  <div class="toc">
    <h3>â€” ç›®æ¬¡ â€”</h3>
        <a href="#chapter-1" class="toc-item"><span class="toc-num">1</span><span class="toc-label">æ–°ã—ã„å§‹ã¾ã‚Š</span></a>
        <a href="#chapter-2" class="toc-item"><span class="toc-num">2</span><span class="toc-label">é£Ÿäº‹ä½œã‚Šã«æŒ‘æˆ¦</span></a>
        <a href="#chapter-3" class="toc-item"><span class="toc-num">3</span><span class="toc-label">å®¶æ—ã®ä¸€æ—¥</span></a>
  </div>

  <div class="characters">
    <h3>â€” ç™»å ´äººç‰© â€”</h3>
    <div class="char-grid">
      <div class="char-card">
        <div class="char-name">å°å¤œå­</div>
        <div class="char-role">main</div>
        <div class="char-desc">å®Œç’§ä¸»ç¾©è€…ã§çŒ®èº«çš„ãªæ€§æ ¼ã ãŒã€å®¶æ—ã¸ã®æ„›æƒ…ã¯æ·±ã„</div>
      </div>
      <div class="char-card">
        <div class="char-name">æ‹“ä¹Ÿ</div>
        <div class="char-role">sub</div>
        <div class="char-desc">å…ƒæ°—ã„ã£ã±ã„ã€‚æ¯è¦ªã¸ã®ä¾å­˜å¿ƒãŒé«˜ã„</div>
      </div>
    </div>
  </div>

  <div class="section-divider"></div>

  <main>

    <section class="chapter" id="chapter-1">
      <div class="chapter-header">
        <span class="chapter-number">ç¬¬1ç« </span>
        <h2 class="chapter-title">æ–°ã—ã„å§‹ã¾ã‚Š</h2>
      </div>
      
      <div class="chapter-body">
        <p>æœã®å†·æ°—ãŒçª“ã‚¬ãƒ©ã‚¹ã‹ã‚‰é€™ã„è¾¼ã‚€ã€‚å¾®ã‹ã«èã“ãˆã‚‹è¿‘æ‰€ã®é³¥ãŸã¡ã®ã•ãˆãšã‚Šã¨ã€ã¾ã æ–°ç¯‰ã§ãªã„ã«ã‚‚é–¢ã‚ã‚‰ãšæ—¢ã«åŸƒã£ã½ã•ãŒæ¼‚ã†å®¶ã®åŒ‚ã„ã€‚å°å¤œå­ã¯ç›®è¦šã¾ã—æ™‚è¨ˆã‚’ä¸‰åº¦æ­¢ã‚ã‚‹ã¨ãƒ™ãƒƒãƒ‰ã‹ã‚‰èµ·ãä¸ŠãŒã£ãŸã€‚æ—¥å·®ã—ãŒè–„æš—ãæ›–æ˜§ãªè‰²åˆã„ã®ä¸­ã€ç™½ã„ç®±åº­ã®ã‚ˆã†ã«åºƒãŒã‚‹æ•·åœ°ã®ä¸€è§’ã§å°ã•ãªå½±ãŒå‹•ãå§‹ã‚ã‚‹ã€‚</p>

        <p>ã€Œã¾ã æ—©ã„æ™‚é–“ã ã­ã€è»½ã‚„ã‹ãªéŸ³ã¨ã¨ã‚‚ã«ç„é–¢ãƒ‰ã‚¢ã‚’é–‹ã‘ãŸå°å¤œå­ã¯å¤–ã«å‡ºã‚‹ã¨è¶³å…ƒã«ç½®ã‹ã‚ŒãŸè·ç‰©ã‚’ä¸€ã¤ãšã¤é‹ã³å§‹ã‚ãŸã€‚é’ç©ºã«è–„ã„é›²ãŒã‹ã™ã‚ã¦ã„ãä¸­ã€æœæ—¥ã‹ã‚‰ã®å…‰ãŒå¾®ç´°ãªåŸƒã¨å…±ã«è¸Šã‚‹ã€‚</p>

        <p>ã€Œãƒ‘ãƒ‘ã€ã“ã‚Œã©ã£ã¡ã«ãŠãï¼Ÿã€æ‹“ä¹Ÿã®å°ã•ãªå£°ã¨æ‰‹ã®ä¸­ã«ã‚ã‚‹ã‚«ã‚¿ãƒ­ã‚°å‹ã®ç®±ãŒè¦–ç•Œã«å…¥ã‚‹ã€‚</p>
        <p>å°å¤œå­ã¯å¾®ç¬‘ã¿ã‚’æµ®ã‹ã¹ã¦ç­”ãˆãŸã€‚ã€Œã‚ãã“ã«ã€‚ã€ã€Œã†ã‚“ã€</p>

        <p>å®¶ã®å¤–å£ã«è§¦ã‚Œã‚‹å†·ãŸã•ã€‚æ‰‹å…ˆã§æ„Ÿã˜ã‚‹ã¾ã æ–°ã—ã„ã†ã¡ç‰¹æœ‰ã®æ¸…æ½”æ„Ÿã¨ã€åŒæ™‚ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹é‡åœ§ã®ã‚ˆã†ãªã‚‚ã®ã€‚</p>

        <p>ã€Œä»Šæ—¥ã‹ã‚‰æ–°ã—ã„å®¶ã ã­ã€æ‹“ä¹ŸãŒè¨€ã£ãŸã€‚</p>
        <p>ã€Œãã†ã ã­ã€ã¨å°å¤œå­ã¯é™ã‹ã«ç­”ãˆã‚‹ã€‚ã€Œã§ã‚‚å¤§ä¸ˆå¤«ã ã‚ˆã€</p>

        <p>è·ç‰©ã‚’éƒ¨å±‹ã”ã¨ã«åˆ†ã‘ã¦ã„ãä½œæ¥­ã€‚ä¸€ç¬ã‚‚æ­¢ã¾ã‚‹ã“ã¨ãªãé€²ã‚€ãã®å‹•ãã¯ã€ã¾ã‚‹ã§æ™‚é–“ãŒæº¶ã‘å‡ºã™ã‚ˆã†ã«æ»‘ã‚‰ã‹ã ã£ãŸã€‚</p>

        <p>çª“ã‹ã‚‰å·®ã—è¾¼ã‚€å…‰ãŒåºŠä¸€é¢ã‚’é»„é‡‘è‰²ã®çµ¨æ¯¯ã«å¤‰ãˆã‚‹ã€‚ã€Œã“ã‚Œã€å£ç´™å¼µã£ã¦ã­ã€ã¨å°å¤œå­ã¯æ‹“ä¹Ÿã¸è©±ã—ã‹ã‘ã‚‹ã€‚å¹¼ã„æ¯å­ã‚’è¦‹ã¤ã‚ãªãŒã‚‰ã€Œãƒ‘ãƒ‘ã¨äºŒäººã§ã‚‚ã§ãã‚‹ã‚ˆã€</p>
        <p>ã€Œã†ã‚“ã€</p>

        <p>æœæ—¥ã®ä¸­ã€è·ç‰©é‹ã³ãŒé€²ã‚€æ§˜å­ã¯ã¾ã‚‹ã§æ˜ ç”»ã®ãƒ¯ãƒ³ã‚·ãƒ¼ãƒ³ã®ã‚ˆã†ã«é™ã‹ã«é€²è¡Œã—ã¦ã„ãŸã€‚</p>

        <p>ã‚­ãƒƒãƒãƒ³ã®ã‚·ãƒ³ã‚¯ã«ã¯ã¾ã æ°´æ»´ãŒæ®‹ã‚Šã€ãã®ä¸Šéƒ¨ã‹ã‚‰çª“ã‚¬ãƒ©ã‚¹ã‚’ä¼ã„è½ã¡ã‚‹é›¨ç²’ã€‚æ–°ã—ã„å®¶ã§ã®åˆæ—¥ã®ä»•äº‹ã‚’å°å¤œå­ã¨æ‹“ä¹Ÿã¯å§‹ã‚ã‚‹ã€‚ã€ŒãŠè…¹ã™ã„ãŸã€ã¨å°ã•ãªå£°ã¨å…±ã«æ‹“ä¹ŸãŒè¨€ã£ãŸã€‚</p>
        <p>ã€Œã˜ã‚ƒã‚ã€æœã”é£¯ã«ã™ã‚‹ã­ã€</p>

        <p>å†·è”­ãŒåºƒãŒã‚ŠãªãŒã‚‰ã‚‚æ–°ç¯‰å®¶ã®é›°å›²æ°—ã‚’æ¼‚ã‚ã›ã‚‹é–“ã®ä¸€éƒ¨å±‹ã€‚ãã®ä¸­ã«äºŒäººã§ä½œã‚Šå‡ºã™æš–ã‹ãªå…‰ç·šã€‚</p>

        <p>å°å¤œå­ã¯æ‰‹éš›ã‚ˆãæº–å‚™ã‚’é€²ã‚ãŸã€‚ã€Œãƒ‘ãƒ‘ã€åµæ¸©ã‚ã¨ã„ã¦ã€</p>
        <p>ã€Œã†ã‚“ã€ã¨æ‹“ä¹Ÿã¯é ·ãã€‚</p>
        <p>æœæ—¥ã®å¼±ã„å…‰èŠ’ãŒçª“ã‹ã‚‰å·®ã—è¾¼ã‚€å§¿å‹¢ã‚’è¦‹ã¤ã‚ã¦ã„ã‚‹æ™‚ã€å°å¤œå­ã®ç³ã«ã¯æŸ”ã‚‰ã‹ã„è‰²åˆã„ãŒæµ®ã‹ã¶ã€‚</p>

        <p>æ–°ã—ã„å®¶ã§ã®ä¸€æ—¥ãŒå§‹ã¾ã£ãŸã°ã‹ã‚Šã ãŒã€ãã“ã«ã‚ã‚‹ã®ã¯æ—¢ã«å®¶æ—ã‚’ç¹‹ãæš–ã‹ãªå…‰ã€‚ãã—ã¦ãã‚Œã¯ã¾ã å§‹ã¾ã£ãŸã ã‘ã®ã“ã¨ã ã£ãŸã€‚</p>
        <p>ãã®æ—¥ã¯é™ã‹ã§ç¾ã—ã„æ–°ãŸãªä¸€æ—¥ã¨ãªã‚Šã¤ã¤ã‚ã£ãŸã€‚</p>
      </div>
    </section>
    <section class="chapter" id="chapter-2">
      <div class="chapter-header">
        <span class="chapter-number">ç¬¬2ç« </span>
        <h2 class="chapter-title">é£Ÿäº‹ä½œã‚Šã«æŒ‘æˆ¦</h2>
      </div>
      
      <div class="chapter-body">
        <p>æœéœ²ãŒã¾ã è‘‰ã®ä¸Šã«ä¹—ã£ã¦ã„ã‚‹æ™‚é–“å¸¯ã€æ—¥å·®ã—ãŒæŸ”ã‚‰ã‹ãå·®ã—è¾¼ã‚€ã€‚æ–°å±…ã‹ã‚‰å°‘ã—é›¢ã‚ŒãŸå…¬åœ’ã§ã¯å­ä¾›ãŸã¡ã¨æ¯è¦ªãŸã¡ãŒé›†ã¾ã‚Šå§‹ã‚ã¦ã„ã‚‹ã€‚ã€Œã»ã‚“ã‚ã‹ã€ã¨ã—ã¦ã¯ä¸ååˆ†ã ãŒã€ãã®é™½å…‰ã«ã¯ä¸€ç¨®ã®äººæ‡ã£ã“ã•ãŒã‚ã‚‹ã€‚</p>

        <p>å°å¤œå­ã®æ‰‹ã«å°ã•ãªç´™è¢‹ãŒæ¡ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ä¸­èº«ã¯å…ˆæ—¥è²·ã„æƒãˆãŸæ–™ç†æ•™å®¤ã§ä½¿ã†é£Ÿæã ã€‚å…¬åœ’ã‚’é€šã‚ŠæŠœã‘ã¦ã€å°‘ã—åºƒã„å®¶ã®ä¸€ã¤ã¸ã¨å‘ã‹ã†ã€‚</p>
        <p>ãƒ‰ã‚¢ã‚’é–‹ã‘ã‚‹éŸ³ã€é´ã‚’è„±ãå‹•ä½œã€‚ã€Œã“ã‚“ã«ã¡ã¯ã€ã¨æŒ¨æ‹¶ã™ã‚‹å£°ã€‚</p>

        <p>ã€ŒãŠã£ã—ã‚ƒã¾ã„ã­ãˆã€</p>
        <p>ç„é–¢ã§å°å¤œå­ã®æ‰‹ã‚’è¦‹ãŸä¸»å©¦ãŒç¬‘é¡”ã‚’æµ®ã‹ã¹ã‚‹ã€‚ç´™è¢‹ã‚’å—ã‘å–ã‚Šã€ã€Œã“ã¡ã‚‰ã“ãã€</p>

        <p>æ•™å®¤ã¯æ˜ã‚‹ãåºƒã€…ã¨ã—ã¦ãŠã‚Šã€å¤©äº•ã‹ã‚‰åŠã‚‰ã‚ŒãŸãƒ©ãƒ³ãƒ—ãŒæš–ã‹ãªå…‰ã‚’æ”¾ã£ã¦ã„ã‚‹ã€‚</p>
        <p>ã€Œãã‚Œã§ã¯çš†ã•ã‚“ã€ãŠæ°—è»½ã«ã€ã¨æ•™å¸«ãŒæŒ¨æ‹¶ã€‚</p>

        <p>ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯é¶è‚‰ã¨é‡èœã‚’ä½¿ã£ãŸãƒ‘ã‚¹ã‚¿æ–™ç†ã ã£ãŸã€‚ã€Œã¾ãšã¯æº–å‚™æ®µéšã§ã™ã­ã€‚çš†ã•ã‚“ã®ãƒšãƒ¼ã‚¹ã§é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€</p>

        <p>å°å¤œå­ã¯æµã—ã«é£Ÿå™¨ã‚„èª¿ç†å™¨å…·ã‚’ä¸¦ã¹ã‚‹ã€‚æ°´é“ã‹ã‚‰å‡ºã‚‹å†·æ°´ã€ãã®å†·ãŸã•ãŒæ‰‹è¢‹ã‚’é€šã˜ã¦æ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚</p>

        <p>ã€Œä½•ã‚’ä½œã‚‹ã®ï¼Ÿã€ã€Œé¶è‚‰ã¨ãƒ‘ã‚¹ã‚¿ã€ã¨è¿”äº‹ã‚’ã—ãªãŒã‚‰é£Ÿæã‚’æ¢ã—å§‹ã‚ã‚‹ã€‚</p>
        <p>åŒ…ä¸ã‚’æŒã¡ã€ã€Œæº–å‚™ä¸‡ç«¯ã€</p>
        <p>é‡èœã¯è‰²ã¨ã‚Šã©ã‚Šã§ã€ãã‚Œãã‚Œã«ç‹¬ç‰¹ãªè³ªæ„ŸãŒã‚ã‚‹ã€‚ã€Œã“ã‚Œã ã‚ˆã­ã€</p>

        <p>ç”Ÿåœ°ã‚’åºƒã’ã‚‹ã€‚æ‰‹ãŒè§¦ã‚Œã‚‹ã¨æŸ”ã‚‰ã‹ã„æ„Ÿè§¦ã€‚</p>

        <p>ã€Œã™ã¿ã¾ã›ã‚“ã€ã©ã†ã‚„ã£ã¦åˆ‡ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿã€ã¨å£°æ›ã‘ã‚’ã™ã‚‹ã€‚</p>

        <p>éš£ã®ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ¼ãƒˆãŒæŒ¯ã‚Šå‘ã„ã¦ç¬‘é¡”ã‚’ä½œã£ãŸã€‚</p>
        <p>ã€Œå¤§ä¸ˆå¤«ã§ã™ã‚ˆã€ã¨ç­”ãˆã‚‹å£°ã€‚ã€Œä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€</p>

        <p>é¶è‚‰ã‚’åŒ…ä¸ã§è–„ãã‚¹ãƒ©ã‚¤ã‚¹ã—å§‹ã‚ã‚‹ã€‚éŸ³ã¯é™ã‹ã ãŒã€ç¢ºã‹ãªãƒªã‚ºãƒ ãŒã‚ã‚‹ã€‚</p>

        <p>ã€Œå°å¤œå­ã•ã‚“ã‚‚ä¸Šæ‰‹ã§ã™ã­ã€</p>
        <p>èª°ã‹ã‚‰ã®è¨€è‘‰ã ã‚ã†ã‹ã€‚è¦–ç·šã‚’æ„Ÿã˜ã‚‹ã€‚</p>
        <p>ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€ã¨è¿”ã™å£°ã€‚ã€ŒãŠäº’ã„ã«åŠ©ã‘åˆã£ã¦ã€</p>

        <p>çª“ã‹ã‚‰å·®ã—è¾¼ã‚€å…‰ãŒé£Ÿæã‚’åŒ…ã¿è¾¼ã¿ã€ä¸€ã¤ã®æš–ã‹ã„ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œã‚Šå‡ºã—ã¦ã„ã‚‹ã€‚ãã®ä¸­ã§äººé–“ãŸã¡ã®å‹•ãã¯è‡ªç„¶ã¨èª¿å’Œã™ã‚‹ã€‚</p>

        <p>æ™‚é–“ã¨å…±ã«æ•™å®¤ã®åŒ‚ã„ã‚‚å¤‰åŒ–ã—ã¦ã„ãã€‚</p>
        <p>ã€Œå‡ºæ¥ä¸ŠãŒã‚Šã§ã™ã­ã€</p>
        <p>å°å¤œå­ã®ä½œã£ãŸæ–™ç†ã‚’è©¦é£Ÿã€‚ã€Œç¾å‘³ã—ã„ã­ã€</p>

        <p>ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ¼ãƒˆåŒå£«ãŒäº’ã„ã«è¤’ã‚åˆã„ã€ç¬‘é¡”ã‚’è¦‹ã›ã‚‹ã€‚ãã®å…‰æ™¯è‡ªä½“ãŒä¸€ã¤ã®ä½œå“ã¨ã—ã¦å®Œæˆã—ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‹ã€‚</p>

        <p>çª“ã‹ã‚‰è¦‹ãˆã‚‹å…¬åœ’ã¯æ›´ã«è³‘ã‚ã„ã‚’è¦‹ã›å§‹ã‚ã¦ã„ãŸã€‚</p>
        <p>ã€Œä»Šåº¦ä¸€ç·’ã«éŠã³ã«è¡Œãã¾ã—ã‚‡ã†ã€ã¨å£°ã‚’ã‹ã‘ã‚‰ã‚Œã‚‹ã€‚ã€Œãã†ã§ã™ã­ã€</p>
        <p>æ•™å®¤ã§å­¦ã‚“ã ã“ã¨ã¯æ–°å±…ã§ã‚‚æ´»ã‹ã•ã‚Œã‚‹ã“ã¨ã ã‚ã†ã€‚</p>

        <p>å°å¤œå­ã¯ã‚‚ã†ä¸€åº¦æ–™ç†ã‚’è¦‹ä¸‹ã‚ã—ãŸã€‚ãã®ä¸­ã«è‡ªåˆ†ãŒæº¶ã‘è¾¼ã‚“ã§ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ã‚‰ã‚ŒãŸã€‚</p>
      </div>
    </section>
    <section class="chapter" id="chapter-3">
      <div class="chapter-header">
        <span class="chapter-number">ç¬¬3ç« </span>
        <h2 class="chapter-title">å®¶æ—ã®ä¸€æ—¥</h2>
      </div>
      
      <div class="chapter-body">
        <p>æ˜¥æ—¥äº¤å·®ç‚¹è¿‘ãã®å…¬åœ’ã€‚æœéœ²ãŒã¾ã ç™½ã€…ã¨åœ°é¢ã«ã¾ã¨ã‚ã‚Šã¤ã„ã¦ã„ãŸã€‚é’ç©ºã«ã¯å°ã•ãªé›²ãŒæµ®ã‹ã³ã€é¢¨ã«ä¹—ã£ã¦çˆ½ã‚„ã‹ãªè‰æœ¨ã®é¦™ã‚ŠãŒæ¼‚ã†ã€‚é³©ãŸã¡ãŒç ‚åˆ©é“ã‚’æ­©ãéŸ³ã¨ã¨ã‚‚ã«ã€é ãã§å­ä¾›ãŸã¡ã®ç¬‘ã„å£°ãŒèã“ãˆã¦ãã‚‹ã€‚</p>

        <p>ã€Œæœã‹ã‚‰å…ƒæ°—ã ã­ã€ã¨å°å¤œå­ã¯å¤«ã¸ã¨å¾®ç¬‘ã‚“ã§è¦‹ã›ã‚‹ã€‚</p>
        <p>ã€Œãã†ã§ã™ã­ã€ã¨æ‹“ä¹Ÿã•ã‚“ã¯è¿”äº‹ã‚’ã™ã‚‹ã€‚ã€Œä»Šæ—¥ã¯å…¬åœ’ã«è¡Œãã“ã¨ã«ã—ãŸã‚“ã ã€‚ã€</p>

        <p>ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ã€äºŒäººã¯æ­©ãå‡ºã™ã€‚æ˜¥ã®æ—¥å·®ã—ã«æš–ã‹ãåŒ…ã¾ã‚Œã‚‹ã€‚</p>

        <p>å…¬åœ’ã«ã¯æ—¢ã«ä»–ã«ã‚‚å®¶æ—é€£ã‚ŒãŒã„ãŸã€‚å­ã©ã‚‚ãŸã¡ã®å£°ã¨ç¬‘ã„å£°ãŒã‚ã¡ã“ã¡ã‹ã‚‰èã“ãˆã¦ãã‚‹ã€‚å°å¤œå­ã¯å¤«ã¨ä¸€ç·’ã«ãƒ™ãƒ³ãƒã§ä¸€ä¼‘ã¿ã™ã‚‹ã€‚</p>
        <p>ã€Œã“ã“æœ€è¿‘ã€ä½•ã‹æ¥½ã—ã„ã“ã¨ã‚ã‚‹ï¼Ÿã€</p>
        <p>ã€Œæ–™ç†æ•™å®¤ã«è¡Œã£ã¦ã¦ã­ã€‚æ–°ã—ã„ãƒ¬ã‚·ãƒ”ã‚’è¦šãˆãŸã‚“ã ã€</p>
        <p>ã€Œãã‚Œã¯è‰¯ã‹ã£ãŸãªã€ã¨æ‹“ä¹Ÿã•ã‚“ãŒé ·ãã€‚ã€Œä»Šæ—¥ã‚‚ãŠç–²ã‚Œæ§˜ã ã€</p>

        <p>é¢¨ãŒæœ¨ã€…ã®é–“ã‹ã‚‰é€šã‚ŠæŠœã‘ã¦ã„ãéŸ³ã¨ã€é ãã§é³´ã‚‹é³¥ãŸã¡ã®ã•ãˆãšã‚ŠãŒèã“ãˆã‚‹ã€‚</p>

        <p>å…¬åœ’å†…ã®èŠç”Ÿåºƒå ´ã§ã¯å­ä¾›ãŸã¡ã¯æ¥½ã—ãã†ã«éŠã‚“ã§ã„ã‚‹ã€‚å°å¤œå­ã¯ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼ã‚’ç½®ãã€è‰èŠ±ã‚„åœŸã«è§¦ã‚Œã•ã›ã‚ˆã†ã¨ã™ã‚‹ã€‚</p>
        <p>ã€Œãƒ‘ãƒ‘ã‚‚ä¸€ç·’ã«éŠã³ã¾ã›ã‚“ã‹ï¼Ÿã€</p>
        <p>ã€Œã‚ã‚ã€ãã†ã ã­ã€ã¨æ‹“ä¹Ÿã•ã‚“ã¯æ­©ã¿å¯„ã‚‹ã€‚ã€Œã˜ã‚ƒã‚ä»Šæ—¥ã¯å›ãŸã¡ã®ç›¸æ–¹ã ã‚ˆã€</p>

        <p>ç ‚åˆ©é“ã‹ã‚‰èŠç”Ÿã¸ã¨ç§»å‹•ã™ã‚‹éŸ³ãŒå…¬åœ’å…¨ä½“ã«éŸ¿ãã€‚å­ä¾›ãŸã¡ã¯ç¬‘ã„ãªãŒã‚‰ãƒœãƒ¼ãƒ«ã‚’è¿½ã„ã‹ã‘ã¦ã„ã‚‹ã€‚</p>

        <p>ã€Œãƒãƒã€å°å¤œå­ã¯æŒ¯ã‚Šè¿”ã‚‹ã¨ã€æ‹“ä¹Ÿã•ã‚“ãŒå¾®ç¬‘ã‚“ã§ã„ãŸã€‚</p>
        <p>ã€Œä½•ã‹æ‚©ã¿ãŒã‚ã‚‹ï¼Ÿã€</p>
        <p>ã€Œã†ãƒ¼ã‚“ã€ã¨çœ‰é–“ã«ã—ã‚ã‚’ä½œã‚Šã€ã€Œæ–™ç†æ•™å®¤ã§æ–°ã—ã„å‹é”ãŒã§ãã¦ã­ã€</p>

        <p>é¢¨ãŒè‘‰ã£ã±ã®é–“ã‹ã‚‰é€šã‚ŠæŠœã‘ã¦ã„ãã€‚é ãã®æ–¹ã‹ã‚‰ã¯å­ä¾›ãŸã¡ã®å£°ã¨ç¬‘ã„è²ãŒèã“ãˆã¦ãã‚‹ã€‚</p>

        <p>å°å¤œå­ã¯å¤«ã¨ã®ä¼šè©±ã‚’æ¥½ã—ã¿ãªãŒã‚‰ã€å…¬åœ’ã§ã®ä¸€æ—¥ã‚’éã”ã™ã€‚ã€Œã•ã‚ã€å¸°ã‚ã†ã‹ã€ã¨ãƒ™ãƒ“ãƒ¼ã‚«ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰æ­©ã¿å‡ºã™ã€‚</p>
        <p>ã€Œãã†ã ã­ã€æ‹“ä¹Ÿã•ã‚“ãŒé ·ãã€ã€Œä»Šæ—¥ã‚‚ã‚ã‚ŠãŒã¨ã†ã€</p>

        <p>å…¬åœ’ã®å‡ºå£ã«è¿‘ã¥ãã«ã¤ã‚Œã¦è¶³å…ƒã®ç ‚åˆ©é“ãŒéŸ³æ¥½ã®ã‚ˆã†ã«èã“ãˆã‚‹ã€‚é¢¨ã¯å°‘ã—ã ã‘å¼·ããªã‚Šã€æ˜¥ã‚‰ã—ã•ã‚’æ„Ÿã˜ã•ã›ã‚‹ã€‚</p>

        <p>æ‰‹ã‚’ç¹‹ã„ã§æ­©ãå°å¤œå­ã¨å¤«ã€‚å½¼ã‚‰ã‚’åŒ…ã¿è¾¼ã‚€ã‚ˆã†ã«åºƒãŒã‚‹å…‰ã¨å½±ã€‚</p>
        <p>ã€Œã¾ãŸæ˜æ—¥ã­ã€ã¨æ‹“ä¹Ÿã•ã‚“ãŒå¾®ç¬‘ã‚€ã€‚ã€Œä»Šæ—¥ã‚‚ä¸€æ—¥ã€æ¥½ã—ã„æ—¥ã«ãªã£ãŸã€</p>
        <p>å…¬åœ’ã®å‡ºå£ã‹ã‚‰è¦‹ãˆã‚‹ã®ã¯ã¾ã æœéœ²ã«æ¿¡ã‚ŒãŸã‚¢ã‚¹ãƒ•ã‚¡ãƒ«ãƒˆã€‚é ãã§é³©ãŸã¡ã®å£°ãŒèã“ãˆã¦ãã‚‹ã€‚</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>å®Œç’§ãƒãƒã®æ—¥ã€…å¥®é—˜è¨˜</p>
    <p>Generated locally with Ollama + Stable Diffusion</p>
  </footer>


  <button class="tts-fab" id="ttsFab" onclick="ttsToggle()" title="Read aloud">
    <span id="ttsFabIcon">&#x1f50a;</span>
  </button>
  <div class="tts-bar" id="ttsBar">
    <button onclick="ttsPause()" id="ttsPauseBtn">&#x23f8;</button>
    <button onclick="ttsStop()">&#x23f9;</button>
    <button onclick="ttsPrev()">&#x23ee;</button>
    <button onclick="ttsNext()">&#x23ed;</button>
    <span class="tts-info" id="ttsInfo">Ready</span>
    <span class="tts-speed">
      <input type="range" id="ttsSpeed" min="0.5" max="2.0" step="0.1"
             value="1.0" onchange="ttsSetSpeed(this.value)" />
      <span id="ttsSpeedVal">1.0x</span>
    </span>
  </div>

  <button class="mode-toggle" onclick="toggleMode()">ğŸŒ— è¡¨ç¤ºåˆ‡æ›¿</button>

  <script>
    // Reading mode
    function toggleMode() {
      document.body.classList.toggle('light');
      localStorage.setItem('mode', document.body.classList.contains('light') ? 'light' : 'dark');
    }
    if (localStorage.getItem('mode') === 'light') document.body.classList.add('light');

    // Scroll progress
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
      document.getElementById('progress').style.width = pct + '%';
    });

    // === TTS (Web Speech API) ===
    const synth = window.speechSynthesis;
    let ttsChs = [], ttsI = 0, ttsRate = 1.0, ttsOn = false, ttsPd = false;

    document.querySelectorAll('.chapter').forEach((sec, i) => {
      const b = sec.querySelector('.chapter-body');
      const t = sec.querySelector('.chapter-title');
      if (b) ttsChs.push({
        title: t ? t.textContent : ('Ch.' + (i+1)),
        text: b.textContent.trim(), el: sec
      });
    });

    function ttsToggle() {
      if (!synth) { alert('Speech not supported'); return; }
      if (ttsOn) { ttsStop(); return; }
      const sy = window.scrollY + window.innerHeight / 3;
      let cl = 0;
      ttsChs.forEach((c, i) => { if (c.el.offsetTop <= sy) cl = i; });
      ttsI = cl; ttsOn = true; ttsPd = false;
      document.getElementById('ttsFab').classList.add('speaking');
      document.getElementById('ttsFabIcon').innerHTML = '&#x23f9;';
      document.getElementById('ttsBar').classList.add('active');
      _ttsRead();
    }

    function _ttsRead() {
      if (ttsI >= ttsChs.length) { ttsStop(); return; }
      synth.cancel();
      const ch = ttsChs[ttsI];
      document.getElementById('ttsInfo').textContent = ch.title;
      ch.el.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // Split by Japanese sentence endings for reliable playback
      const sents = ch.text.match(/[^ã€‚ï¼ï¼Ÿ
]+[ã€‚ï¼ï¼Ÿ]?/g) || [ch.text];
      let si = 0;

      function next() {
        if (!ttsOn) return;
        if (si >= sents.length) {
          ttsI++;
          if (ttsI < ttsChs.length) setTimeout(_ttsRead, 800);
          else ttsStop();
          return;
        }
        const u = new SpeechSynthesisUtterance(sents[si].trim());
        u.lang = 'ja-JP'; u.rate = ttsRate;
        const vs = synth.getVoices();
        const jv = vs.find(v => v.lang && v.lang.startsWith('ja'));
        if (jv) u.voice = jv;
        u.onend = () => { si++; next(); };
        u.onerror = () => { si++; next(); };
        synth.speak(u);
      }
      next();
    }

    function ttsPause() {
      if (!ttsOn) return;
      if (ttsPd) {
        synth.resume(); ttsPd = false;
        document.getElementById('ttsPauseBtn').innerHTML = '&#x23f8;';
      } else {
        synth.pause(); ttsPd = true;
        document.getElementById('ttsPauseBtn').innerHTML = '&#x25b6;';
      }
    }

    function ttsStop() {
      synth.cancel(); ttsOn = false; ttsPd = false;
      document.getElementById('ttsFab').classList.remove('speaking');
      document.getElementById('ttsFabIcon').innerHTML = '&#x1f50a;';
      document.getElementById('ttsBar').classList.remove('active');
      document.getElementById('ttsInfo').textContent = 'Ready';
      document.getElementById('ttsPauseBtn').innerHTML = '&#x23f8;';
    }

    function ttsNext() { if (ttsOn && ttsI < ttsChs.length - 1) { ttsI++; _ttsRead(); } }
    function ttsPrev() { if (ttsOn && ttsI > 0) { ttsI--; _ttsRead(); } }
    function ttsSetSpeed(v) {
      ttsRate = parseFloat(v);
      document.getElementById('ttsSpeedVal').textContent = v + 'x';
    }
    if (synth) synth.onvoiceschanged = () => synth.getVoices();

  </script>
</body>
</html>